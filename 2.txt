#include "HX711.h"                                    // подключаем библиотеку для работы с тензодатчиком
#include <LiquidCrystal_I2C.h>                        // подключаем библиотеку для работы c дисплеем

#define DT  3                                         // Указываем номер вывода, к которому подключен вывод DT  датчика
#define SCK 2                                         // Указываем номер вывода, к которому подключен вывод SCK датчика

HX711 scale;                                          // создаём объект scale
LiquidCrystal_I2C lcd(0x27, 20, 4);                   // создаём объект lcd

float calibration_factor = 0.752;                     // вводим калибровочный коэффициент
float units;                                          // задаём переменную для измерений в граммах
float ounces;                                         // задаём переменную для измерений в унциях
float tara;                                           // задаём переменную тара

void setup() {
  lcd.begin(16,2);                                    // иницилизация дисплея
  Serial.begin(9600);                                 // инициируем работу последовательного порта на скорости 9600 бод
  scale.begin(DT, SCK);                               // инициируем работу с датчиком
  scale.set_scale();                                  // выполняем измерение значения без калибровочного коэффициента
  scale.tare();                                       // сбрасываем значения веса на датчике в 0
  scale.set_scale(calibration_factor);                // устанавливаем калибровочный коэффициент
  lcd.init();                                         // инициализация ЖК дисплея                   
 lcd.backlight();                                     // включаем подстветку
 pinMode(8, INPUT_PULLUP);                            // указываем пин кнопки
}

void loop() {

  bool x=digitalRead(8);
  Serial.print(x);
  if (x==0) {
    tara=ounces;
  }
  for (int i = 0; i < 10; i ++) {                     //усредняем показания, считав значения датчика 10 раз
    units = + scale.get_units(), 10;                  //суммируем показания 10 замеров
  }
  units = units / 10;                                 //усредняем показания, разделив сумму значений на 10
  ounces = units * 0.035274;                          //переводим вес из унций в граммы                                  
  lcd.setCursor(4, 1);                                //установка курсора на дисплее
  lcd.print(round(ounces-tara));                      //вывод с тарой
  delay(50);                                          // задержка 50 секунд
  lcd.print("        ");                              // вывод
}